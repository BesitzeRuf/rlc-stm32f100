#include "adc.h"


// Таблица вывода постоянного значения. Всегда выводится только одно
const int16_t DacArrayDC = 2048;

// 11 элементов формирования 50кГц сигнала. Каждый период содержит 11 точек
const int16_t DacSinArray50[11] = {
2048,
3129,
3867,
4028,
3559,
2611,
1485,
537,
68,
229,
967
};

// 11 элементов для премножения отсчетов. 
//Считывание АЦП через отсчет ЦАП - в 2 раза реже. На 2 периодах как раз проходимся по всем точкам ЦАП
//Конец массива обозначен 1 в младшем бите
const int32_t SinCosArray50[11] = {
(0    <<1)&0x1FFFE|(2000 <<17)&0xFFFE0000,//0
(1819 <<1)&0x1FFFE|(831  <<17)&0xFFFE0000,//2
(1511 <<1)&0x1FFFE|(-1310<<17)&0xFFFE0000,//4
(-563 <<1)&0x1FFFE|(-1919<<17)&0xFFFE0000,//6
(-1980<<1)&0x1FFFE|(-285 <<17)&0xFFFE0000,//8
(-1081<<1)&0x1FFFE|(1683 <<17)&0xFFFE0000,//10
(1081 <<1)&0x1FFFE|(1683 <<17)&0xFFFE0000,//1
(1980 <<1)&0x1FFFE|(-285 <<17)&0xFFFE0000,//3
(563  <<1)&0x1FFFE|(-1919<<17)&0xFFFE0000,//5
(-1511<<1)&0x1FFFE|(-1310<<17)&0xFFFE0000,//7
(-1819<<1)&0x1FFFE|(831  <<17)&0xFFFE0000|1,//9
};

//55 точек ЦАП 10 кГц
const int16_t DacSinArray10[55] = {
2048,
2276,
2501,
2720,
2930,
3129,
3314,
3482,
3632,
3761,
3867,
3950,
4008,
4041,
4047,
4028,
3982,
3912,
3817,
3699,
3559,
3400,
3224,
3031,
2827,
2611,
2389,
2162,
1934,
1707,
1485,
1269,
1065,
872 ,
696 ,
537 ,
397 ,
279 ,
184 ,
114 ,
68  ,
49  ,
55  ,
88  ,
146 ,
229 ,
335 ,
464 ,
614 ,
782 ,
967 ,
1166,
1376,
1595,
1820
};

// 55 точек умножения синуса и косинуса
const int32_t SinCosArray10[55] = {
(0    <<1)&0x1FFFE|(2000 <<17)&0xFFFE0000,
(453  <<1)&0x1FFFE|(1948 <<17)&0xFFFE0000,
(882  <<1)&0x1FFFE|(1795 <<17)&0xFFFE0000,
(1266 <<1)&0x1FFFE|(1548 <<17)&0xFFFE0000,
(1584 <<1)&0x1FFFE|(1221 <<17)&0xFFFE0000,
(1819 <<1)&0x1FFFE|(831  <<17)&0xFFFE0000,
(1960 <<1)&0x1FFFE|(397  <<17)&0xFFFE0000,
(1999 <<1)&0x1FFFE|(-57  <<17)&0xFFFE0000,
(1934 <<1)&0x1FFFE|(-508 <<17)&0xFFFE0000,
(1769 <<1)&0x1FFFE|(-933 <<17)&0xFFFE0000,
(1511 <<1)&0x1FFFE|(-1310<<17)&0xFFFE0000,
(1176 <<1)&0x1FFFE|(-1618<<17)&0xFFFE0000,
(779  <<1)&0x1FFFE|(-1842<<17)&0xFFFE0000,
(341  <<1)&0x1FFFE|(-1971<<17)&0xFFFE0000,
(-114 <<1)&0x1FFFE|(-1997<<17)&0xFFFE0000,
(-563 <<1)&0x1FFFE|(-1919<<17)&0xFFFE0000,
(-983 <<1)&0x1FFFE|(-1741<<17)&0xFFFE0000,
(-1352<<1)&0x1FFFE|(-1473<<17)&0xFFFE0000,
(-1651<<1)&0x1FFFE|(-1129<<17)&0xFFFE0000,
(-1864<<1)&0x1FFFE|(-726 <<17)&0xFFFE0000,
(-1980<<1)&0x1FFFE|(-285 <<17)&0xFFFE0000,
(-1993<<1)&0x1FFFE|(171  <<17)&0xFFFE0000,
(-1902<<1)&0x1FFFE|(618  <<17)&0xFFFE0000,
(-1713<<1)&0x1FFFE|(1033 <<17)&0xFFFE0000,
(-1434<<1)&0x1FFFE|(1394 <<17)&0xFFFE0000,
(-1081<<1)&0x1FFFE|(1683 <<17)&0xFFFE0000,
(-672 <<1)&0x1FFFE|(1884 <<17)&0xFFFE0000,
(-228 <<1)&0x1FFFE|(1987 <<17)&0xFFFE0000,
(228  <<1)&0x1FFFE|(1987 <<17)&0xFFFE0000,
(672  <<1)&0x1FFFE|(1884 <<17)&0xFFFE0000,
(1081 <<1)&0x1FFFE|(1683 <<17)&0xFFFE0000,
(1434 <<1)&0x1FFFE|(1394 <<17)&0xFFFE0000,
(1713 <<1)&0x1FFFE|(1033 <<17)&0xFFFE0000,
(1902 <<1)&0x1FFFE|(618  <<17)&0xFFFE0000,
(1993 <<1)&0x1FFFE|(171  <<17)&0xFFFE0000,
(1980 <<1)&0x1FFFE|(-285 <<17)&0xFFFE0000,
(1864 <<1)&0x1FFFE|(-726 <<17)&0xFFFE0000,
(1651 <<1)&0x1FFFE|(-1129<<17)&0xFFFE0000,
(1352 <<1)&0x1FFFE|(-1473<<17)&0xFFFE0000,
(983  <<1)&0x1FFFE|(-1741<<17)&0xFFFE0000,
(563  <<1)&0x1FFFE|(-1919<<17)&0xFFFE0000,
(114  <<1)&0x1FFFE|(-1997<<17)&0xFFFE0000,
(-341 <<1)&0x1FFFE|(-1971<<17)&0xFFFE0000,
(-779 <<1)&0x1FFFE|(-1842<<17)&0xFFFE0000,
(-1176<<1)&0x1FFFE|(-1618<<17)&0xFFFE0000,
(-1511<<1)&0x1FFFE|(-1310<<17)&0xFFFE0000,
(-1769<<1)&0x1FFFE|(-933 <<17)&0xFFFE0000,
(-1934<<1)&0x1FFFE|(-508 <<17)&0xFFFE0000,
(-1999<<1)&0x1FFFE|(-57  <<17)&0xFFFE0000,
(-1960<<1)&0x1FFFE|(397  <<17)&0xFFFE0000,
(-1819<<1)&0x1FFFE|(831  <<17)&0xFFFE0000,
(-1584<<1)&0x1FFFE|(1221 <<17)&0xFFFE0000,
(-1266<<1)&0x1FFFE|(1548 <<17)&0xFFFE0000,
(-882 <<1)&0x1FFFE|(1795 <<17)&0xFFFE0000,
(-453 <<1)&0x1FFFE|(1948 <<17)&0xFFFE0000 | 1
};

// 41 точка четверти периода 1 кГц. Используется и для ЦАП и для умножения
// Косинус получается считыванием массива с конца
const int16_t SinArray1[41] = {
0|BEGIN_FLAG,
79,
157,
235,
313,
390,
467,
543,
618,
692,
765,
837,
908,
977,
1045,
1111,
1176,
1238,
1299,
1358,
1414,
1469,
1521,
1571,
1618,
1663,
1705,
1745,
1782,
1816,
1848,
1876,
1902,
1925,
1945,
1962,
1975,
1986,
1994,
1998,
2000 | END_FLAG
};

// Массив 100Гц - 401 точка
const int16_t SinArray100[401] = {
0 | BEGIN_FLAG,
8,
16,
24,
31,
39,
47,
55,
63,
71,
79,
86,
94,
102,
110,
118,
126,
133,
141,
149,
157,
165,
173,
180,
188,
196,
204,
212,
219,
227,
235,
243,
251,
258,
266,
274,
282,
290,
297,
305,
313,
321,
328,
336,
344,
352,
359,
367,
375,
382,
390,
398,
406,
413,
421,
429,
436,
444,
452,
459,
467,
475,
482,
490,
497,
505,
513,
520,
528,
535,
543,
550,
558,
566,
573,
581,
588,
596,
603,
611,
618,
625,
633,
640,
648,
655,
663,
670,
677,
685,
692,
700,
707,
714,
722,
729,
736,
744,
751,
758,
765,
773,
780,
787,
794,
801,
809,
816,
823,
830,
837,
844,
852,
859,
866,
873,
880,
887,
894,
901,
908,
915,
922,
929,
936,
943,
950,
957,
964,
970,
977,
984,
991,
998,
1005,
1011,
1018,
1025,
1032,
1038,
1045,
1052,
1058,
1065,
1072,
1078,
1085,
1091,
1098,
1105,
1111,
1118,
1124,
1131,
1137,
1144,
1150,
1156,
1163,
1169,
1176,
1182,
1188,
1195,
1201,
1207,
1213,
1220,
1226,
1232,
1238,
1244,
1250,
1257,
1263,
1269,
1275,
1281,
1287,
1293,
1299,
1305,
1311,
1317,
1323,
1329,
1334,
1340,
1346,
1352,
1358,
1363,
1369,
1375,
1381,
1386,
1392,
1397,
1403,
1409,
1414,
1420,
1425,
1431,
1436,
1442,
1447,
1453,
1458,
1463,
1469,
1474,
1479,
1485,
1490,
1495,
1500,
1505,
1511,
1516,
1521,
1526,
1531,
1536,
1541,
1546,
1551,
1556,
1561,
1566,
1571,
1575,
1580,
1585,
1590,
1595,
1599,
1604,
1609,
1613,
1618,
1623,
1627,
1632,
1636,
1641,
1645,
1650,
1654,
1659,
1663,
1667,
1672,
1676,
1680,
1684,
1689,
1693,
1697,
1701,
1705,
1709,
1713,
1717,
1721,
1725,
1729,
1733,
1737,
1741,
1745,
1749,
1753,
1756,
1760,
1764,
1768,
1771,
1775,
1778,
1782,
1786,
1789,
1793,
1796,
1799,
1803,
1806,
1810,
1813,
1816,
1820,
1823,
1826,
1829,
1832,
1836,
1839,
1842,
1845,
1848,
1851,
1854,
1857,
1860,
1862,
1865,
1868,
1871,
1874,
1876,
1879,
1882,
1884,
1887,
1890,
1892,
1895,
1897,
1900,
1902,
1905,
1907,
1909,
1912,
1914,
1916,
1918,
1921,
1923,
1925,
1927,
1929,
1931,
1933,
1935,
1937,
1939,
1941,
1943,
1945,
1947,
1948,
1950,
1952,
1954,
1955,
1957,
1958,
1960,
1962,
1963,
1965,
1966,
1967,
1969,
1970,
1972,
1973,
1974,
1975,
1977,
1978,
1979,
1980,
1981,
1982,
1983,
1984,
1985,
1986,
1987,
1988,
1989,
1990,
1990,
1991,
1992,
1993,
1993,
1994,
1994,
1995,
1996,
1996,
1997,
1997,
1997,
1998,
1998,
1998,
1999,
1999,
1999,
1999,
2000,
2000,
2000,
2000,
2000,
2000 | END_FLAG
};

